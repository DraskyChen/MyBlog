import{_ as i,c as a,o as n,ag as t}from"./chunks/framework.C2Gjomh7.js";const o=JSON.parse('{"title":"å»¶ååˆå§‹åŒ–","description":"","frontmatter":{},"headers":[],"relativePath":"ai/DeepLearning/æ·±åº¦å­¦ä¹ è®¡ç®—/deferred-init.md","filePath":"ai/DeepLearning/æ·±åº¦å­¦ä¹ è®¡ç®—/deferred-init.md","lastUpdated":1756829839000}'),e={name:"ai/DeepLearning/æ·±åº¦å­¦ä¹ è®¡ç®—/deferred-init.md"};function l(p,s,h,k,d,r){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="å»¶ååˆå§‹åŒ–" tabindex="-1">å»¶ååˆå§‹åŒ– <a class="header-anchor" href="#å»¶ååˆå§‹åŒ–" aria-label="Permalink to &quot;å»¶ååˆå§‹åŒ–&quot;">â€‹</a></h1><p>ğŸ·ï¸<code>sec_deferred_init</code></p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¿½ç•¥äº†å»ºç«‹ç½‘ç»œæ—¶éœ€è¦åšçš„ä»¥ä¸‹è¿™äº›äº‹æƒ…ï¼š</p><ul><li>æˆ‘ä»¬å®šä¹‰äº†ç½‘ç»œæ¶æ„ï¼Œä½†æ²¡æœ‰æŒ‡å®šè¾“å…¥ç»´åº¦ã€‚</li><li>æˆ‘ä»¬æ·»åŠ å±‚æ—¶æ²¡æœ‰æŒ‡å®šå‰ä¸€å±‚çš„è¾“å‡ºç»´åº¦ã€‚</li><li>æˆ‘ä»¬åœ¨åˆå§‹åŒ–å‚æ•°æ—¶ï¼Œç”šè‡³æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç¡®å®šæ¨¡å‹åº”è¯¥åŒ…å«å¤šå°‘å‚æ•°ã€‚</li></ul><p>æœ‰äº›è¯»è€…å¯èƒ½ä¼šå¯¹æˆ‘ä»¬çš„ä»£ç èƒ½è¿è¡Œæ„Ÿåˆ°æƒŠè®¶ã€‚ æ¯•ç«Ÿï¼Œæ·±åº¦å­¦ä¹ æ¡†æ¶æ— æ³•åˆ¤æ–­ç½‘ç»œçš„è¾“å…¥ç»´åº¦æ˜¯ä»€ä¹ˆã€‚ è¿™é‡Œçš„è¯€çªæ˜¯æ¡†æ¶çš„<em>å»¶ååˆå§‹åŒ–</em>ï¼ˆdefers initializationï¼‰ï¼Œ å³ç›´åˆ°æ•°æ®ç¬¬ä¸€æ¬¡é€šè¿‡æ¨¡å‹ä¼ é€’æ—¶ï¼Œæ¡†æ¶æ‰ä¼šåŠ¨æ€åœ°æ¨æ–­å‡ºæ¯ä¸ªå±‚çš„å¤§å°ã€‚</p><p>åœ¨ä»¥åï¼Œå½“ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œæ—¶ï¼Œ ç”±äºè¾“å…¥ç»´åº¦ï¼ˆå³å›¾åƒçš„åˆ†è¾¨ç‡ï¼‰å°†å½±å“æ¯ä¸ªåç»­å±‚çš„ç»´æ•°ï¼Œ æœ‰äº†è¯¥æŠ€æœ¯å°†æ›´åŠ æ–¹ä¾¿ã€‚ ç°åœ¨æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶æ— é¡»çŸ¥é“ç»´åº¦æ˜¯ä»€ä¹ˆå°±å¯ä»¥è®¾ç½®å‚æ•°ï¼Œ è¿™ç§èƒ½åŠ›å¯ä»¥å¤§å¤§ç®€åŒ–å®šä¹‰å’Œä¿®æ”¹æ¨¡å‹çš„ä»»åŠ¡ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ›´æ·±å…¥åœ°ç ”ç©¶åˆå§‹åŒ–æœºåˆ¶ã€‚</p><h2 id="å®ä¾‹åŒ–ç½‘ç»œ" tabindex="-1">å®ä¾‹åŒ–ç½‘ç»œ <a class="header-anchor" href="#å®ä¾‹åŒ–ç½‘ç»œ" aria-label="Permalink to &quot;å®ä¾‹åŒ–ç½‘ç»œ&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªå¤šå±‚æ„ŸçŸ¥æœºã€‚</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mxnet </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np, npx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mxnet.gluon </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nn</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npx.set_np()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_net</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    net </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> nn.Sequential()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    net.add(nn.Dense(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">activation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;relu&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    net.add(nn.Dense(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> net</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> get_net()</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#@tab tensorflow</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tensorflow </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tf.keras.models.Sequential([</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tf.keras.layers.Dense(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">activation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tf.nn.relu),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tf.keras.layers.Dense(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><p>æ­¤æ—¶ï¼Œå› ä¸ºè¾“å…¥ç»´æ•°æ˜¯æœªçŸ¥çš„ï¼Œæ‰€ä»¥ç½‘ç»œä¸å¯èƒ½çŸ¥é“è¾“å…¥å±‚æƒé‡çš„ç»´æ•°ã€‚ å› æ­¤ï¼Œæ¡†æ¶å°šæœªåˆå§‹åŒ–ä»»ä½•å‚æ•°ï¼Œæˆ‘ä»¬é€šè¿‡å°è¯•è®¿é—®ä»¥ä¸‹å‚æ•°è¿›è¡Œç¡®è®¤ã€‚</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(net.collect_params)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(net.collect_params())</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#@tab tensorflow</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[net.layers[i].get_weights() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(net.layers))]</span></span></code></pre></div><p>:begin_tab:<code>mxnet</code> æ³¨æ„ï¼Œå½“å‚æ•°å¯¹è±¡å­˜åœ¨æ—¶ï¼Œæ¯ä¸ªå±‚çš„è¾“å…¥ç»´åº¦ä¸º-1ã€‚ MXNetä½¿ç”¨ç‰¹æ®Šå€¼-1è¡¨ç¤ºå‚æ•°ç»´åº¦ä»ç„¶æœªçŸ¥ã€‚ æ­¤æ—¶ï¼Œå°è¯•è®¿é—®<code>net[0].weight.data()</code>å°†è§¦å‘è¿è¡Œæ—¶é”™è¯¯ï¼Œ æç¤ºå¿…é¡»å…ˆåˆå§‹åŒ–ç½‘ç»œï¼Œç„¶åæ‰èƒ½è®¿é—®å‚æ•°ã€‚ ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬è¯•å›¾é€šè¿‡<code>initialize</code>å‡½æ•°åˆå§‹åŒ–å‚æ•°æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ :end_tab:</p><p>:begin_tab:<code>tensorflow</code> è¯·æ³¨æ„ï¼Œæ¯ä¸ªå±‚å¯¹è±¡éƒ½å­˜åœ¨ï¼Œä½†æƒé‡ä¸ºç©ºã€‚ ä½¿ç”¨<code>net.get_weights()</code>å°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºæƒé‡å°šæœªåˆå§‹åŒ–ã€‚ :end_tab:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net.initialize()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net.collect_params()</span></span></code></pre></div><p>:begin_tab:<code>mxnet</code> å¦‚æˆ‘ä»¬æ‰€è§ï¼Œä¸€åˆ‡éƒ½æ²¡æœ‰æ”¹å˜ã€‚ å½“è¾“å…¥ç»´åº¦æœªçŸ¥æ—¶ï¼Œè°ƒç”¨<code>initialize</code>ä¸ä¼šçœŸæ­£åˆå§‹åŒ–å‚æ•°ã€‚ è€Œæ˜¯ä¼šåœ¨MXNetå†…éƒ¨å£°æ˜å¸Œæœ›åˆå§‹åŒ–å‚æ•°ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©åˆå§‹åŒ–åˆ†å¸ƒã€‚ :end_tab:</p><p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬å°†æ•°æ®é€šè¿‡ç½‘ç»œï¼Œæœ€ç»ˆä½¿æ¡†æ¶åˆå§‹åŒ–å‚æ•°ã€‚</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np.random.uniform(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net(X)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net.collect_params()</span></span></code></pre></div><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#@tab tensorflow</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tf.random.uniform((</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">net(X)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[w.shape </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> w </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> net.get_weights()]</span></span></code></pre></div><p>ä¸€æ—¦æˆ‘ä»¬çŸ¥é“è¾“å…¥ç»´æ•°æ˜¯20ï¼Œæ¡†æ¶å¯ä»¥é€šè¿‡ä»£å…¥å€¼20æ¥è¯†åˆ«ç¬¬ä¸€å±‚æƒé‡çŸ©é˜µçš„å½¢çŠ¶ã€‚ è¯†åˆ«å‡ºç¬¬ä¸€å±‚çš„å½¢çŠ¶åï¼Œæ¡†æ¶å¤„ç†ç¬¬äºŒå±‚ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å½¢çŠ¶éƒ½å·²çŸ¥ä¸ºæ­¢ã€‚ æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰ç¬¬ä¸€å±‚éœ€è¦å»¶è¿Ÿåˆå§‹åŒ–ï¼Œä½†æ˜¯æ¡†æ¶ä»æ˜¯æŒ‰é¡ºåºåˆå§‹åŒ–çš„ã€‚ ç­‰åˆ°çŸ¥é“äº†æ‰€æœ‰çš„å‚æ•°å½¢çŠ¶ï¼Œæ¡†æ¶å°±å¯ä»¥åˆå§‹åŒ–å‚æ•°ã€‚</p><h2 id="å°ç»“" tabindex="-1">å°ç»“ <a class="header-anchor" href="#å°ç»“" aria-label="Permalink to &quot;å°ç»“&quot;">â€‹</a></h2><ul><li>å»¶ååˆå§‹åŒ–ä½¿æ¡†æ¶èƒ½å¤Ÿè‡ªåŠ¨æ¨æ–­å‚æ•°å½¢çŠ¶ï¼Œä½¿ä¿®æ”¹æ¨¡å‹æ¶æ„å˜å¾—å®¹æ˜“ï¼Œé¿å…äº†ä¸€äº›å¸¸è§çš„é”™è¯¯ã€‚</li><li>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡å‹ä¼ é€’æ•°æ®ï¼Œä½¿æ¡†æ¶æœ€ç»ˆåˆå§‹åŒ–å‚æ•°ã€‚</li></ul><h2 id="ç»ƒä¹ " tabindex="-1">ç»ƒä¹  <a class="header-anchor" href="#ç»ƒä¹ " aria-label="Permalink to &quot;ç»ƒä¹ &quot;">â€‹</a></h2><ol><li>å¦‚æœæŒ‡å®šäº†ç¬¬ä¸€å±‚çš„è¾“å…¥å°ºå¯¸ï¼Œä½†æ²¡æœ‰æŒ‡å®šåç»­å±‚çš„å°ºå¯¸ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ˜¯å¦ç«‹å³è¿›è¡Œåˆå§‹åŒ–ï¼Ÿ</li><li>å¦‚æœæŒ‡å®šäº†ä¸åŒ¹é…çš„ç»´åº¦ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li><li>å¦‚æœè¾“å…¥å…·æœ‰ä¸åŒçš„ç»´åº¦ï¼Œéœ€è¦åšä»€ä¹ˆï¼Ÿæç¤ºï¼šæŸ¥çœ‹å‚æ•°ç»‘å®šçš„ç›¸å…³å†…å®¹ã€‚</li></ol><p>:begin_tab:<code>mxnet</code><a href="https://discuss.d2l.ai/t/5770" target="_blank" rel="noreferrer">Discussions</a> :end_tab:</p><p>:begin_tab:<code>pytorch</code><a href="https://discuss.d2l.ai/t/5770" target="_blank" rel="noreferrer">Discussions</a> :end_tab:</p><p>:begin_tab:<code>tensorflow</code><a href="https://discuss.d2l.ai/t/1833" target="_blank" rel="noreferrer">Discussions</a> :end_tab:</p><p>:begin_tab:<code>paddle</code><a href="https://discuss.d2l.ai/t/11779" target="_blank" rel="noreferrer">Discussions</a> :end_tab:</p>`,29)])])}const g=i(e,[["render",l]]);export{o as __pageData,g as default};
