import{_ as l,c as n,o as t,ag as p,j as i,a}from"./chunks/framework.C2Gjomh7.js";const h="/MyBlog/assets/copyto.CGeUF03k.svg",T=JSON.parse('{"title":"GPU","description":"","frontmatter":{},"headers":[],"relativePath":"ai/DeepLearning/深度学习计算/use-gpu.md","filePath":"ai/DeepLearning/深度学习计算/use-gpu.md","lastUpdated":1756829839000}'),e={name:"ai/DeepLearning/深度学习计算/use-gpu.md"},k={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.781ex",height:"1.52ex",role:"img",focusable:"false",viewBox:"0 -661 345 672","aria-hidden":"true"},r={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},E={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.781ex",height:"1.52ex",role:"img",focusable:"false",viewBox:"0 -661 345 672","aria-hidden":"true"},o={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.781ex",height:"1.52ex",role:"img",focusable:"false",viewBox:"0 -661 345 672","aria-hidden":"true"},y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.781ex",height:"1.52ex",role:"img",focusable:"false",viewBox:"0 -661 345 672","aria-hidden":"true"},u={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.553ex",height:"1.557ex",role:"img",focusable:"false",viewBox:"0 -666 4222.4 688","aria-hidden":"true"};function C(b,s,v,m,A,D){return t(),n("div",null,[s[53]||(s[53]=p("",15)),i("p",null,[s[4]||(s[4]=a(":begin_tab:",-1)),s[5]||(s[5]=i("code",null,"mxnet",-1)),s[6]||(s[6]=a(" 在MXNet中，CPU和GPU可以用",-1)),s[7]||(s[7]=i("code",null,"cpu()",-1)),s[8]||(s[8]=a("和",-1)),s[9]||(s[9]=i("code",null,"gpu()",-1)),s[10]||(s[10]=a("表示。 需要注意的是，",-1)),s[11]||(s[11]=i("code",null,"cpu()",-1)),s[12]||(s[12]=a("（或括号中的任意整数）表示所有物理CPU和内存， 这意味着MXNet的计算将尝试使用所有CPU核心。 然而，",-1)),s[13]||(s[13]=i("code",null,"gpu()",-1)),s[14]||(s[14]=a("只代表一个卡和相应的显存。 如果有多个GPU，我们使用",-1)),s[15]||(s[15]=i("code",null,"gpu(i)",-1)),s[16]||(s[16]=a("表示第",-1)),i("mjx-container",k,[(t(),n("svg",d,[...s[0]||(s[0]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)])])),s[1]||(s[1]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"i")])],-1))]),s[17]||(s[17]=a("块GPU（",-1)),i("mjx-container",r,[(t(),n("svg",E,[...s[2]||(s[2]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)])])),s[3]||(s[3]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"i")])],-1))]),s[18]||(s[18]=a("从0开始）。 另外，",-1)),s[19]||(s[19]=i("code",null,"gpu(0)",-1)),s[20]||(s[20]=a("和",-1)),s[21]||(s[21]=i("code",null,"gpu()",-1)),s[22]||(s[22]=a("是等价的。 :end_tab:",-1))]),i("p",null,[s[27]||(s[27]=a(":begin_tab:",-1)),s[28]||(s[28]=i("code",null,"pytorch",-1)),s[29]||(s[29]=a(" 在PyTorch中，CPU和GPU可以用",-1)),s[30]||(s[30]=i("code",null,"torch.device('cpu')",-1)),s[31]||(s[31]=a(" 和",-1)),s[32]||(s[32]=i("code",null,"torch.device('cuda')",-1)),s[33]||(s[33]=a("表示。 应该注意的是，",-1)),s[34]||(s[34]=i("code",null,"cpu",-1)),s[35]||(s[35]=a("设备意味着所有物理CPU和内存， 这意味着PyTorch的计算将尝试使用所有CPU核心。 然而，",-1)),s[36]||(s[36]=i("code",null,"gpu",-1)),s[37]||(s[37]=a("设备只代表一个卡和相应的显存。 如果有多个GPU，我们使用",-1)),s[38]||(s[38]=i("code",null,"torch.device(f'cuda:{i}')",-1)),s[39]||(s[39]=a(" 来表示第",-1)),i("mjx-container",o,[(t(),n("svg",g,[...s[23]||(s[23]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)])])),s[24]||(s[24]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"i")])],-1))]),s[40]||(s[40]=a("块GPU（",-1)),i("mjx-container",y,[(t(),n("svg",c,[...s[25]||(s[25]=[i("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[i("g",{"data-mml-node":"math"},[i("g",{"data-mml-node":"mi"},[i("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)])])),s[26]||(s[26]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mi",null,"i")])],-1))]),s[41]||(s[41]=a("从0开始）。 另外，",-1)),s[42]||(s[42]=i("code",null,"cuda:0",-1)),s[43]||(s[43]=a("和",-1)),s[44]||(s[44]=i("code",null,"cuda",-1)),s[45]||(s[45]=a("是等价的。 :end_tab:",-1))]),s[54]||(s[54]=p("",68)),i("ol",null,[s[50]||(s[50]=i("li",null,"尝试一个计算量更大的任务，比如大矩阵的乘法，看看CPU和GPU之间的速度差异。再试一个计算量很小的任务呢？",-1)),s[51]||(s[51]=i("li",null,"我们应该如何在GPU上读写模型参数？",-1)),i("li",null,[s[48]||(s[48]=a("测量计算1000个",-1)),i("mjx-container",u,[(t(),n("svg",F,[...s[46]||(s[46]=[p("",1)])])),s[47]||(s[47]=i("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[i("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[i("mn",null,"100"),i("mo",null,"×"),i("mn",null,"100")])],-1))]),s[49]||(s[49]=a("矩阵的矩阵乘法所需的时间，并记录输出矩阵的Frobenius范数，一次记录一个结果，而不是在GPU上保存日志并仅传输最终结果。",-1))]),s[52]||(s[52]=i("li",null,"测量同时在两个GPU上执行两个矩阵乘法与在一个GPU上按顺序执行两个矩阵乘法所需的时间。提示：应该看到近乎线性的缩放。",-1))]),s[55]||(s[55]=p("",4))])}const Q=l(e,[["render",C]]);export{T as __pageData,Q as default};
