import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.D207NPw5.js";const t="/MyBlog/assets/image.B5fhYFMh.png",p="/MyBlog/assets/image-1.C7OsR2Xj.png",c=JSON.parse('{"title":"Nginx æŠ€æœ¯åšå®¢","description":"","frontmatter":{},"headers":[],"relativePath":"devops/server/Nginxè¯¦è§£.md","filePath":"devops/server/Nginxè¯¦è§£.md","lastUpdated":1756011999000}'),e={name:"devops/server/Nginxè¯¦è§£.md"};function h(k,s,r,g,d,o){return n(),a("div",null,[...s[0]||(s[0]=[l('<p>å¥½çš„ ğŸ‘ æˆ‘å¸®ä½ æ•´ç†ä¸€ç¯‡ <strong>å…³äº Nginx çš„æŠ€æœ¯åšå®¢</strong>ï¼Œå†…å®¹ç»“æ„æ¸…æ™°ï¼Œé€‚åˆç›´æ¥æ”¾åˆ° VitePress æˆ–è€…å…¶ä»–æŠ€æœ¯åšå®¢å¹³å°ä¸­ã€‚ä»¥ä¸‹å†…å®¹ä¼šæ¶µç›–åŸºç¡€æ¦‚å¿µã€å¸¸è§åº”ç”¨åœºæ™¯ã€æ ¸å¿ƒé…ç½®è§£æï¼Œä»¥åŠæ€§èƒ½ä¼˜åŒ–ä¸å®è·µã€‚</p><hr><h1 id="nginx-æŠ€æœ¯åšå®¢" tabindex="-1">Nginx æŠ€æœ¯åšå®¢ <a class="header-anchor" href="#nginx-æŠ€æœ¯åšå®¢" aria-label="Permalink to &quot;Nginx æŠ€æœ¯åšå®¢&quot;">â€‹</a></h1><h2 id="ä¸€ã€nginx-ç®€ä»‹" tabindex="-1">ä¸€ã€Nginx ç®€ä»‹ <a class="header-anchor" href="#ä¸€ã€nginx-ç®€ä»‹" aria-label="Permalink to &quot;ä¸€ã€Nginx ç®€ä»‹&quot;">â€‹</a></h2><p>Nginxï¼ˆå‘éŸ³ <em>engine x</em>ï¼‰æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ <strong>HTTP æœåŠ¡å™¨</strong>ã€<strong>åå‘ä»£ç†æœåŠ¡å™¨</strong>ã€<strong>è´Ÿè½½å‡è¡¡å™¨</strong> å’Œ <strong>é‚®ä»¶ä»£ç†æœåŠ¡å™¨</strong>ã€‚ å®ƒç”±ä¿„ç½—æ–¯çš„ Igor Sysoev äº 2004 å¹´å¼€å‘ï¼Œå¹¶å› å…¶ <strong>é«˜å¹¶å‘å¤„ç†èƒ½åŠ›</strong>ã€<strong>ä½å†…å­˜æ¶ˆè€—</strong> å’Œ <strong>å¼ºå¤§çš„æ‰©å±•æ€§</strong>ï¼Œåœ¨å…¨çƒèŒƒå›´å†…è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p><p>ä¸ Apache ç›¸æ¯”ï¼ŒNginx æ›´é€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚æ ¹æ®å®˜æ–¹ç»Ÿè®¡ï¼ŒNginx èƒ½å¤Ÿè½»æ¾æ”¯æ’‘æ•°åä¸‡å¹¶å‘è¿æ¥ï¼Œå› æ­¤è¢«å¤§é‡äº’è”ç½‘å…¬å¸é€‰ç”¨ã€‚</p><hr><h2 id="äºŒã€æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">äºŒã€æ ¸å¿ƒæ¦‚å¿µ <a class="header-anchor" href="#äºŒã€æ ¸å¿ƒæ¦‚å¿µ" aria-label="Permalink to &quot;äºŒã€æ ¸å¿ƒæ¦‚å¿µ&quot;">â€‹</a></h2><p>åœ¨æ·±å…¥ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆç†è§£å‡ ä¸ªå…³é”®æ¦‚å¿µï¼š</p><h3 id="_1-æ­£å‘ä»£ç†ä¸åå‘ä»£ç†" tabindex="-1">1. æ­£å‘ä»£ç†ä¸åå‘ä»£ç† <a class="header-anchor" href="#_1-æ­£å‘ä»£ç†ä¸åå‘ä»£ç†" aria-label="Permalink to &quot;1. æ­£å‘ä»£ç†ä¸åå‘ä»£ç†&quot;">â€‹</a></h3><ul><li><strong>æ­£å‘ä»£ç†</strong>ï¼šä»£ç†å®¢æˆ·ç«¯è®¿é—®å¤–éƒ¨èµ„æºï¼Œä¾‹å¦‚ç¿»å¢™ä»£ç†ã€‚ <img src="'+t+'" alt="alt text"></li><li><strong>åå‘ä»£ç†</strong>ï¼šä»£ç†æœåŠ¡å™¨ç«¯ï¼Œå°†å¤–éƒ¨è¯·æ±‚è½¬å‘åˆ°å†…éƒ¨æœåŠ¡å™¨ï¼ŒNginx å°±å¸¸ç”¨äºåå‘ä»£ç†ã€‚ <img src="'+p+`" alt="alt text"></li></ul><h3 id="_2-è´Ÿè½½å‡è¡¡" tabindex="-1">2. è´Ÿè½½å‡è¡¡ <a class="header-anchor" href="#_2-è´Ÿè½½å‡è¡¡" aria-label="Permalink to &quot;2. è´Ÿè½½å‡è¡¡&quot;">â€‹</a></h3><p>Nginx å¯ä»¥å°†è¯·æ±‚åˆ†å‘åˆ°å¤šå°åç«¯æœåŠ¡å™¨ï¼Œå®ç°ï¼š</p><ul><li><strong>è½®è¯¢ï¼ˆRound Robinï¼‰</strong></li><li><strong>æœ€å°‘è¿æ¥ï¼ˆLeast Connectionsï¼‰</strong></li><li><strong>IP Hashï¼ˆåŸºäºå®¢æˆ·ç«¯ IP å›ºå®šåˆ†é…ï¼‰</strong></li></ul><h3 id="_3-é™æ€èµ„æºæœåŠ¡" tabindex="-1">3. é™æ€èµ„æºæœåŠ¡ <a class="header-anchor" href="#_3-é™æ€èµ„æºæœåŠ¡" aria-label="Permalink to &quot;3. é™æ€èµ„æºæœåŠ¡&quot;">â€‹</a></h3><p>Nginx èƒ½ç›´æ¥å¤„ç† HTMLã€CSSã€JSã€å›¾ç‰‡ã€è§†é¢‘ç­‰é™æ€æ–‡ä»¶ï¼Œæ€§èƒ½è¿œè¶… Node.js / Python ç­‰åº”ç”¨æœåŠ¡å™¨ã€‚</p><hr><h2 id="ä¸‰ã€nginx-é…ç½®æ–‡ä»¶ç»“æ„" tabindex="-1">ä¸‰ã€Nginx é…ç½®æ–‡ä»¶ç»“æ„ <a class="header-anchor" href="#ä¸‰ã€nginx-é…ç½®æ–‡ä»¶ç»“æ„" aria-label="Permalink to &quot;ä¸‰ã€Nginx é…ç½®æ–‡ä»¶ç»“æ„&quot;">â€‹</a></h2><p>Nginx çš„ä¸»é…ç½®æ–‡ä»¶é€šå¸¸æ˜¯ <code>nginx.conf</code>ï¼Œå…¶åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å…¨å±€é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">worker_processes </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">events</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    worker_connections </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    include </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      mime.types;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    default_type </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> application/octet-stream;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    sendfile </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">       on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    keepalive_timeout </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 65</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æœåŠ¡å™¨å—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> example.com;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  /usr/share/nginx/html;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            index </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index.html index.htm;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # åå‘ä»£ç†é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api/ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:3000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="é…ç½®è§£æ" tabindex="-1">é…ç½®è§£æï¼š <a class="header-anchor" href="#é…ç½®è§£æ" aria-label="Permalink to &quot;é…ç½®è§£æï¼š&quot;">â€‹</a></h3><ul><li><strong>å…¨å±€å—</strong>ï¼šå®šä¹‰å·¥ä½œè¿›ç¨‹æ•°é‡ã€æ—¥å¿—è·¯å¾„ç­‰ã€‚</li><li><strong>events å—</strong>ï¼šå¤„ç†è¿æ¥çš„ç›¸å…³é…ç½®ã€‚</li><li><strong>http å—</strong>ï¼šæ ¸å¿ƒé…ç½®ï¼ŒåŒ…æ‹¬ MIME ç±»å‹ã€æ—¥å¿—ã€gzip å‹ç¼©ã€è™šæ‹Ÿä¸»æœºç­‰ã€‚</li><li><strong>server å—</strong>ï¼šå®šä¹‰ä¸€ä¸ªè™šæ‹Ÿä¸»æœºï¼Œå¯ä»¥æœ‰å¤šä¸ª serverã€‚</li><li><strong>location å—</strong>ï¼šå…·ä½“çš„è¯·æ±‚åŒ¹é…è§„åˆ™ã€‚</li></ul><hr><h2 id="å››ã€å¸¸è§åº”ç”¨åœºæ™¯" tabindex="-1">å››ã€å¸¸è§åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#å››ã€å¸¸è§åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;å››ã€å¸¸è§åº”ç”¨åœºæ™¯&quot;">â€‹</a></h2><h3 id="_1-é™æ€èµ„æºæœåŠ¡å™¨" tabindex="-1">1. é™æ€èµ„æºæœåŠ¡å™¨ <a class="header-anchor" href="#_1-é™æ€èµ„æºæœåŠ¡å™¨" aria-label="Permalink to &quot;1. é™æ€èµ„æºæœåŠ¡å™¨&quot;">â€‹</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">static.example.com;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/var/www/static;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        index </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index.html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-åå‘ä»£ç†" tabindex="-1">2. åå‘ä»£ç† <a class="header-anchor" href="#_2-åå‘ä»£ç†" aria-label="Permalink to &quot;2. åå‘ä»£ç†&quot;">â€‹</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api/ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:5000;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-è´Ÿè½½å‡è¡¡" tabindex="-1">3. è´Ÿè½½å‡è¡¡ <a class="header-anchor" href="#_3-è´Ÿè½½å‡è¡¡" aria-label="Permalink to &quot;3. è´Ÿè½½å‡è¡¡&quot;">â€‹</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">upstream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> backend </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:8080;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:8081;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 127.0.0.1:8082;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://backend;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_4-https-é…ç½®-ssl-è¯ä¹¦" tabindex="-1">4. HTTPS é…ç½®ï¼ˆSSL è¯ä¹¦ï¼‰ <a class="header-anchor" href="#_4-https-é…ç½®-ssl-è¯ä¹¦" aria-label="Permalink to &quot;4. HTTPS é…ç½®ï¼ˆSSL è¯ä¹¦ï¼‰&quot;">â€‹</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">443</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssl;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">example.com;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_certificate </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    /etc/nginx/ssl/example.crt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ssl_certificate_key </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/etc/nginx/ssl/example.key;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/var/www/html;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        index </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index.html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="äº”ã€æ€§èƒ½ä¼˜åŒ–å®è·µ" tabindex="-1">äº”ã€æ€§èƒ½ä¼˜åŒ–å®è·µ <a class="header-anchor" href="#äº”ã€æ€§èƒ½ä¼˜åŒ–å®è·µ" aria-label="Permalink to &quot;äº”ã€æ€§èƒ½ä¼˜åŒ–å®è·µ&quot;">â€‹</a></h2><p>Nginx çš„æ€§èƒ½ä¼˜åŒ–å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼š</p><ol><li><p><strong>è¿æ¥ä¼˜åŒ–</strong></p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">worker_processes </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auto;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">worker_connections </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4096</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">multi_accept </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li><li><p><strong>å¼€å¯ Gzip å‹ç¼©</strong></p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip_types </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">text/plain text/css application/json application/javascript;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gzip_min_length </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1k</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div></li><li><p><strong>ç¼“å­˜é…ç½®</strong></p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ~*</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;"> \\.(jpg|jpeg|png|gif|ico|css|js)$ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    expires </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    add_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Cache-Control </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>HTTP/2 æ”¯æŒ</strong></p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">443</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ssl http2;</span></span></code></pre></div></li><li><p><strong>åå‘ä»£ç†ç¼“å­˜</strong></p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">proxy_cache_path </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/var/cache/nginx levels=1:2 keys_zone=my_cache:10m;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api/ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_cache </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my_cache;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://127.0.0.1:5000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><hr><h2 id="å…­ã€nginx-ä¸-devops" tabindex="-1">å…­ã€Nginx ä¸ DevOps <a class="header-anchor" href="#å…­ã€nginx-ä¸-devops" aria-label="Permalink to &quot;å…­ã€Nginx ä¸ DevOps&quot;">â€‹</a></h2><p>Nginx åœ¨ DevOps åœºæ™¯ä¸­å¸¸ä½œä¸ºï¼š</p><ul><li><strong>å‰ç«¯é™æ€èµ„æºæœåŠ¡å™¨</strong></li><li><strong>å¾®æœåŠ¡ç½‘å…³</strong></li><li><strong>Docker / Kubernetes Ingress Controller</strong></li><li><strong>CI/CD éƒ¨ç½²åæµé‡è°ƒåº¦çš„æ ¸å¿ƒç»„ä»¶</strong></li></ul><hr>`,41)])])}const y=i(e,[["render",h]]);export{c as __pageData,y as default};
