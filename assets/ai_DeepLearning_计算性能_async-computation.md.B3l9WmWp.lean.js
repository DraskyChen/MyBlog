import{_ as h,c as n,o as l,ag as t,j as s,a}from"./chunks/framework.C2Gjomh7.js";const e="/MyBlog/assets/frontends.CGmAIcyC.png",p="/MyBlog/assets/asyncgraph.BD0X3kdN.svg",k="/MyBlog/assets/threading.CN1H_FJj.svg",Z=JSON.parse('{"title":"异步计算","description":"","frontmatter":{},"headers":[],"relativePath":"ai/DeepLearning/计算性能/async-computation.md","filePath":"ai/DeepLearning/计算性能/async-computation.md","lastUpdated":1756829839000}'),d={name:"ai/DeepLearning/计算性能/async-computation.md"},Q={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.131ex",height:"1.507ex",role:"img",focusable:"false",viewBox:"0 -666 500 666","aria-hidden":"true"},T={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},o={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.425ex",height:"1.855ex",role:"img",focusable:"false",viewBox:"0 -626 3282 820","aria-hidden":"true"},E={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"18.361ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 8115.5 1000","aria-hidden":"true"},y={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.656ex",height:"1.557ex",role:"img",focusable:"false",viewBox:"0 -666 2500 688","aria-hidden":"true"},c={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.601ex",height:"1.881ex",role:"img",focusable:"false",viewBox:"0 -666 7337.5 831.6","aria-hidden":"true"},F={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},b={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.339ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.807ex",height:"1.846ex",role:"img",focusable:"false",viewBox:"0 -666 7428.7 816","aria-hidden":"true"},w={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},x={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.656ex",height:"1.557ex",role:"img",focusable:"false",viewBox:"0 -666 2500 688","aria-hidden":"true"},H={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},C={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.601ex",height:"1.881ex",role:"img",focusable:"false",viewBox:"0 -666 7337.5 831.6","aria-hidden":"true"},V={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.339ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.807ex",height:"1.846ex",role:"img",focusable:"false",viewBox:"0 -666 7428.7 816","aria-hidden":"true"};function _(A,i,D,v,M,L){return l(),n("div",null,[i[35]||(i[35]=t("",40)),s("p",null,[i[2]||(i[2]=a(":begin_tab:",-1)),i[3]||(i[3]=s("code",null,"mxnet",-1)),i[4]||(i[4]=a(" 在重度多线程的系统中（即使普通笔记本电脑也有4个或更多线程，然而在多插槽服务器上这个数字可能超过256），调度操作的开销可能会变得非常大。这也是极度希望计算和调度是异步和并行的原因。为了说明这样做的好处，让我们看看按顺序（同步执行）或异步执行多次将变量递增",-1)),s("mjx-container",Q,[(l(),n("svg",r,[...i[0]||(i[0]=[s("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[s("g",{"data-mml-node":"math"},[s("g",{"data-mml-node":"mn"},[s("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])])],-1)])])),i[1]||(i[1]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mn",null,"1")])],-1))]),i[5]||(i[5]=a("会发生什么情况。这里通过在每个加法之间插入",-1)),i[6]||(i[6]=s("code",null,"wait_to_read",-1)),i[7]||(i[7]=a("障碍器来模拟同步执行。 :end_tab:",-1))]),i[36]||(i[36]=t("",3)),s("p",null,[i[18]||(i[18]=a("假设这三个阶段的持续时间分别为",-1)),s("mjx-container",T,[(l(),n("svg",o,[...i[8]||(i[8]=[t("",1)])])),i[9]||(i[9]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"t"),s("mn",null,"1")]),s("mo",null,","),s("msub",null,[s("mi",null,"t"),s("mn",null,"2")]),s("mo",null,","),s("msub",null,[s("mi",null,"t"),s("mn",null,"3")])])],-1))]),i[19]||(i[19]=a("。如果不使用异步编程，执行10000次计算所需的总时间约为",-1)),s("mjx-container",E,[(l(),n("svg",g,[...i[10]||(i[10]=[t("",1)])])),i[11]||(i[11]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mn",null,"10000"),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"t"),s("mn",null,"1")]),s("mo",null,"+"),s("msub",null,[s("mi",null,"t"),s("mn",null,"2")]),s("mo",null,"+"),s("msub",null,[s("mi",null,"t"),s("mn",null,"3")]),s("mo",{stretchy:"false"},")")])],-1))]),i[20]||(i[20]=a("。如果使用异步编程，因为前端不必等待后端为每个循环返回计算结果，执行",-1)),s("mjx-container",y,[(l(),n("svg",m,[...i[12]||(i[12]=[t("",1)])])),i[13]||(i[13]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mn",null,"10000")])],-1))]),i[21]||(i[21]=a("次计算所花费的总时间可以减少到",-1)),s("mjx-container",c,[(l(),n("svg",u,[...i[14]||(i[14]=[t("",1)])])),i[15]||(i[15]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"t"),s("mn",null,"1")]),s("mo",null,"+"),s("mn",null,"10000"),s("msub",null,[s("mi",null,"t"),s("mn",null,"2")]),s("mo",null,"+"),s("msub",null,[s("mi",null,"t"),s("mn",null,"3")])])],-1))]),i[22]||(i[22]=a("（假设",-1)),s("mjx-container",F,[(l(),n("svg",b,[...i[16]||(i[16]=[t("",1)])])),i[17]||(i[17]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mn",null,"10000"),s("msub",null,[s("mi",null,"t"),s("mn",null,"2")]),s("mo",null,">"),s("mn",null,"9999"),s("msub",null,[s("mi",null,"t"),s("mn",null,"1")])])],-1))]),i[23]||(i[23]=a("）。",-1))]),i[37]||(i[37]=t("",6)),s("ol",null,[s("li",null,[i[30]||(i[30]=a("上面提到使用异步计算可以将执行",-1)),s("mjx-container",w,[(l(),n("svg",x,[...i[24]||(i[24]=[t("",1)])])),i[25]||(i[25]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mn",null,"10000")])],-1))]),i[31]||(i[31]=a("次计算所需的总时间减少到",-1)),s("mjx-container",H,[(l(),n("svg",C,[...i[26]||(i[26]=[t("",1)])])),i[27]||(i[27]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("msub",null,[s("mi",null,"t"),s("mn",null,"1")]),s("mo",null,"+"),s("mn",null,"10000"),s("msub",null,[s("mi",null,"t"),s("mn",null,"2")]),s("mo",null,"+"),s("msub",null,[s("mi",null,"t"),s("mn",null,"3")])])],-1))]),i[32]||(i[32]=a("。为什么要假设这里是",-1)),s("mjx-container",V,[(l(),n("svg",f,[...i[28]||(i[28]=[t("",1)])])),i[29]||(i[29]=s("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("mn",null,"10000"),s("msub",null,[s("mi",null,"t"),s("mn",null,"2")]),s("mo",null,">"),s("mn",null,"9999"),s("msub",null,[s("mi",null,"t"),s("mn",null,"1")])])],-1))]),i[33]||(i[33]=a("？",-1))]),i[34]||(i[34]=s("li",null,[a("测量"),s("code",null,"waitall"),a("和"),s("code",null,"wait_to_read"),a("之间的差值。提示：执行多条指令并同步以获得中间结果。 :end_tab:")],-1))]),i[38]||(i[38]=t("",7))])}const P=h(d,[["render",_]]);export{Z as __pageData,P as default};
