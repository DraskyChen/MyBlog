# 🧠 Python进阶语法与编程技巧

> 本文汇总了 Python 编程中的常见进阶语法与技巧，适合有基础的开发者继续深入理解 Python 的语法机制、代码风格与高级用法。

---

## 一、函数式编程技巧

### 1. lambda 匿名函数

```python
add = lambda x, y: x + y
print(add(3, 5))  # 输出 8
```

用于简洁表达短小的函数，常结合 `map`、`filter` 使用。

### 2. map / filter / reduce

```python
# map 示例
nums = [1, 2, 3]
squares = list(map(lambda x: x ** 2, nums))

# filter 示例
even = list(filter(lambda x: x % 2 == 0, nums))

# reduce 示例
from functools import reduce
total = reduce(lambda x, y: x + y, nums)
```

这些是函数式编程中非常重要的高阶函数，用于数据变换与聚合。

---

## 二、列表/字典推导式

### 列表推导式

```python
squares = [x**2 for x in range(5)]
```

### 字典推导式

```python
d = {x: x**2 for x in range(5)}
```

写法简洁，常用于构建新结构。

---

## 三、装饰器（Decorator）

用于在不修改原函数代码的前提下，增强函数的功能。

```python
def decorator(func):
    def wrapper(*args, **kwargs):
        print("函数开始执行")
        result = func(*args, **kwargs)
        print("函数执行结束")
        return result
    return wrapper

@decorator
def say_hello(name):
    print(f"Hello, {name}")

say_hello("Alice")
```

也可用于权限校验、缓存控制、日志打印等。

---

## 四、生成器与迭代器

### 1. 生成器函数（yield）

```python
def countdown(n):
    while n > 0:
        yield n
        n -= 1
```

通过 `yield` 返回一个可迭代对象，节省内存。

### 2. 生成器表达式

```python
gen = (x**2 for x in range(10))
```

---

## 五、异常处理进阶

### 自定义异常类

```python
class MyError(Exception):
    pass

raise MyError("这是自定义异常")
```

### 多种异常捕获

```python
try:
    ...
except (ValueError, ZeroDivisionError) as e:
    print("出错了", e)
```

---

## 六、上下文管理器（with 语句）

### 文件读写的标准方式：

```python
with open("test.txt", "r") as f:
    data = f.read()
```

也可用于自定义资源管理对象：

```python
class MyContext:
    def __enter__(self):
        print("进入上下文")
        return self
    def __exit__(self, exc_type, exc_val, exc_tb):
        print("退出上下文")

with MyContext():
    print("执行中...")
```

---

## 七、类与对象进阶（OOP）

### 1. 类方法与静态方法

```python
class Person:
    @staticmethod
    def say():
        print("静态方法")

    @classmethod
    def info(cls):
        print("类方法", cls)
```

### 2. 属性装饰器

```python
class Circle:
    def __init__(self, r):
        self._r = r

    @property
    def area(self):
        return 3.14 * self._r ** 2
```

---

## 八、模块与包管理

### 自定义模块与导入

* `my_module.py`

```python
def greet():
    print("Hello")
```

* 使用：

```python
import my_module
my_module.greet()
```

### 包结构与 `__init__.py`

```text
my_package/
├── __init__.py
├── module1.py
├── module2.py
```

---

## 九、类型注解（Python 3.5+）

```python
def add(x: int, y: int) -> int:
    return x + y
```

* 使用工具如 `mypy` 检查类型
* 推荐在大型项目中规范代码

---

## 十、代码性能与调试

### 1. 简易性能测试

```python
import time
start = time.time()
# do something
print("耗时：", time.time() - start)
```

### 2. 使用 `timeit` 模块

```python
import timeit
print(timeit.timeit("sum(range(100))", number=10000))
```

---

## 十一、常见标准库

| 库名         | 作用           |
| ---------- | ------------ |
| `os`       | 文件与路径管理      |
| `sys`      | 系统参数与执行环境    |
| `re`       | 正则表达式处理      |
| `datetime` | 时间日期处理       |
| `json`     | JSON序列化与反序列化 |
| `random`   | 随机数生成        |

---

## 十二、建议写法与风格规范

* 遵循 [PEP8](https://peps.python.org/pep-0008/)
* 使用黑盒工具格式化：`black`, `autopep8`
* 推荐使用虚拟环境：`venv` 或 `poetry`

